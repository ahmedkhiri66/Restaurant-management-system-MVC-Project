
@* @model Order *@
@* @{ *@
@*     ViewData["Title"] = "Create Order"; *@
@*     var menuItems = ViewBag.MenuItems as List<MenuItem> ?? new List<MenuItem>(); *@
@* } *@

@* <h1>Create New Order</h1> *@

@* @if (menuItems.Count == 0) *@
@* { *@
@*     <div class="alert alert-warning"> *@
@*         No menu items are currently available. Please try again later. *@
@*     </div> *@
@*     <a asp-action="Index" class="btn btn-secondary">Back to Orders</a> *@
@* } *@
@* else *@
@* { *@
@*     <form asp-action="Create"> *@
@*         <div asp-validation-summary="ModelOnly" class="text-danger"></div> *@

@*         <div class="form-group mb-3"> *@
@*             <label asp-for="CustomerName" class="control-label"></label> *@
@*             <input asp-for="CustomerName" class="form-control" required /> *@
@*             <span asp-validation-for="CustomerName" class="text-danger"></span> *@
@*         </div> *@

@*         <div class="form-group mb-3"> *@
@*             <label asp-for="Type" class="control-label"></label> *@
@*             <select asp-for="Type" class="form-control" id="orderType" required> *@
@*                 <option value="">-- Select Order Type --</option> *@
@*                 <option value="@OrderType.DineIn">Dine-In</option> *@
@*                 <option value="@OrderType.Takeout">Takeout</option> *@
@*                 <option value="@OrderType.Delivery">Delivery</option> *@
@*             </select> *@
@*             <span asp-validation-for="Type" class="text-danger"></span> *@
@*         </div> *@

@*         <div class="form-group mb-3" id="deliveryAddressGroup" style="display: none;"> *@
@*             <label asp-for="DeliveryAddress" class="control-label"></label> *@
@*             <input asp-for="DeliveryAddress" class="form-control" /> *@
@*             <span asp-validation-for="DeliveryAddress" class="text-danger"></span> *@
@*         </div> *@

@*         <h4 class="mt-4">Menu Items</h4> *@
@*         <table class="table"> *@
@*             <thead> *@
@*                 <tr> *@
@*                     <th>Item</th> *@
@*                     <th>Price</th> *@
@*                     <th>Quantity</th> *@
@*                 </tr> *@
@*             </thead> *@
@*             <tbody> *@
@*                 @for (int i = 0; i < menuItems.Count; i++) *@
@*                 { *@
@*                     <tr> *@
@*                         <td> *@
@*                             <input type="hidden" name="menuItemIds" value="@menuItems[i].Id" /> *@
@*                             @menuItems[i].Name *@
@*                             <br /> *@
@*                             <small class="text-muted">@menuItems[i].Description</small> *@
@*                         </td> *@
@*                         <td>$@menuItems[i].Price.ToString("0.00")</td> *@
@*                         <td> *@
@*                             <input type="number" name="quantities" value="0" min="0" max="10" *@
@*                                    class="form-control quantity-input" style="width: 80px;" *@
@*                                    data-price="@menuItems[i].Price" /> *@
@*                         </td> *@
@*                     </tr> *@
@*                 } *@
@*             </tbody> *@
@*         </table> *@

@*         <div class="form-group"> *@
@*             <button type="submit" class="btn btn-primary">Place Order</button> *@
@*             <a asp-action="Index" class="btn btn-secondary">Cancel</a> *@
@*         </div> *@
@*     </form> *@
@* } *@

@* @section Scripts { *@
@*     @{ *@
@*         await Html.RenderPartialAsync("_ValidationScriptsPartial"); *@
@*     } *@

@*     <script> *@
@*         $(document).ready(function() { *@
@*             $('#orderType').change(function() { *@
@*                 if ($(this).val() === '@OrderType.Delivery') { *@
@*                     $('#deliveryAddressGroup').show(); *@
@*                 } else { *@
@*                     $('#deliveryAddressGroup').hide(); *@
@*                 } *@
@*             }); *@
@*         }); *@
@*     </script> *@
@* } *@
@model Order

<h2>New Order</h2>

<form asp-action="Create">
    <div class="form-group">
        <label>Customer Name</label>
        <input asp-for="CustomerName" class="form-control" required>
    </div>

    <div class="form-group">
        <label>Order Type</label>
        <select asp-for="Type" class="form-control">
            <option value="@OrderType.DineIn">Dine-In</option>
            <option value="@OrderType.Takeout">Takeout</option>
            <option value="@OrderType.Delivery">Delivery</option>
        </select>
    </div>

    <h4>Menu Items</h4>
    <table class="table">
        @foreach (var item in ViewBag.MenuItems)
        {
            <tr>
                <td>@item.Name - $@item.Price</td>
                <td>
                    <input type="number" name="quantities" value="0" min="0" class="form-control" style="width:80px">
                    <input type="hidden" name="menuItemIds" value="@item.Id">
                </td>
            </tr>
        }
    </table>

    <button type="submit" class="btn btn-primary">Place Order</button>
    <a asp-action="Index" class="btn btn-secondary">Cancel</a>
</form>